
<div class="container">
  <div class="row">
    <hr>
    <div class="col-md-8 col-md-offset-2">
      <h2>Latest Deals</h2>
      <div class="grid grid-pad">
        <a *ngFor="let deal of deals | paginate: { itemsPerPage: 10, currentPage: p }"
           [routerLink]="['/detail', deal.id]"  class="col-1-4">

          <!--<div *ngIf="deal1" (onCreate)="getlikes(deal1.id)">likes {{likes1}}</div>-->
          <div [hidden]="deal.active === false" >
            <h4><span class="glyphicon glyphicon-fire"></span> {{ deal.id }}
              <!--<span class="glyphicon glyphicon-thumbs-up"></span> {{likeArray[deal1.id -1] - dislikeArray[deal1.id -1] }}-->
              , {{deal.title}}, {{deal.created_at | date}}
              <!--<div *ngIf=" {{ likeArray[deal1.id -1]  : 0 }} ">Text to show</div>-->
              <!--<ng-template #elseBlock>Alternate text while primary text is hidden</ng-template>-->
              <!--likes {{likeArray[deal1.id -1]}}, dislikes {{ dislikeArray[deal1.id -1] }}-->


              <!--likes: {{ getlikes(deal1.id)}}-->
            </h4>
          </div>

    <!--<span appLikes="{{deal1.id}}"></span>-->
        </a>


        <pagination-controls (pageChange)="p = $event"></pagination-controls>
        <!--<pagination-controls (pageChange)="pageChanged($event)"></pagination-controls>-->





</div>
  </div>
  </div>
  <hr>
  <div class="row" [hidden]="!isloggedin()">
    <div class="col-lg-offset-0">
      <form class="form-signin" #f="ngForm" (ngSubmit)="postDeal(f.value)">
        <h2 class="form-signin-heading">Post Deal</h2>
        <div *ngIf="invalidLogin" class="alert alert-danger">Deal submission failed, please try again and check for errors in link.</div>
        <div *ngIf="successSubmit" class="alert alert-success">Deal submission was successful.</div>

        <label for="title" class="sr-only">Username</label>
        <input type="text" id="title" name="title" ngModel class="form-control" placeholder="Deal Title" required autofocus>
        <label for="url" class="sr-only">Password</label>
        <input type="url" id="url" name="url" ngModel class="form-control" placeholder="Deal link" required>
        <button class="btn btn-lg btn-primary btn-block" type="submit" [disabled]="!f.valid">Submit</button>
      </form>
    </div>
  </div>
</div>
<div class="row" [hidden]="isloggedin()">
  <div class="col-md-10 col-lg-10">
    <div class="form-signin" >
      <h2 class="form-signin-heading">Post Deal</h2>
      <div class="alert alert-warning">
        <strong>Warning!</strong> You have to be logged in to post a deal.
      </div>

    </div>
  </div>
</div>
